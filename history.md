# 작업 일지

스스로 기록용도로 작성

## 7월 4일 (목)

### PR 코멘트 반영하기

1. ~~GetMapping 등에서 url 이 동일한 것에 대해서 통합표기 (@controller)~~
2. rest 도메인과 관련해서 엔드포인트 네이밍의 해석의 모호함
3. 문법 띄워쓰기 관련 google java style guide 참고하기 (내가 못하면 cmd + option + L) 을 매번 눌러주자
4. ~~pm 변수명 삭제 → productService로 변경 (처음에는 productManager 정도로 생각하고 임시로 작성하였다가 바꾸지 않았던 것이 문제가 됨)~~
5. 불필요한 주석 삭제 → 사용하지 않는 것들에 대해서 (가독성 떨어뜨림)

에 대해서 진행

### valid 적용 테스트 코드 작성하기

이름 길이가 15글자를 넘는 경우와 0글자인 경우에 대해 로직과 테스트 추가

### TODO

예외에 대한 메세지가 너무 흩어져있어서 관리가 안되고 있다고 생각되어짐.
한 군데로 모아서 예외에 대한 관리를 진행할 필요가 있다고 생각.
예외 테스트코드에서 문자열 비교를 통해서 assert 하는 것은 너무 안좋은 방법이라고 생각되어짐.

## 7월 5일 (금)

1. 회원가입 관련 구현
2. 로그인 관련 구현

궁금증 : 모델에서 null 허용이 되는 wrapper class를 사용하는 것이 좋은 방법일까? 나쁜 방법일까?

-[ ] Product 에 setter가 필요한가?

readme 와 history와 notion 3개의 중복된 문서 작성 문제... 굳이 필요없는 내용을 많이 남긴다는 생각 자체가 잘못된 것 같기도?
주말에 특정한 규칙을 정하기 필요

-[ ] 문서정리규칙 정하기

### 수정해야할 것

1. 규격화된 테스트로 전체적인 동작에 문제가 없는지 확인하기
2. 컨트롤러 - 서비스 - 모델 사이에서 명확하게 책임 정해서 작업하기
3. JWT 공부해서 제대로 적용시키기 (비밀키 숨기기)
4. 인증토큰에 대해서 서버에서 어떻게 인증토큰을 통해서 권한을 설정하는지 제대로 알고 적용시키기

- [ ] 테스트코드를 위한 보일러플레이트 클래스를 만들어서 사용해도 되는가? - 좋은가? 나쁜가?

- [ ] Repository는 정확히 어떤 책임을 지고 있는 것인지? 새로운 멤버를 등록하였다면 이걸 다시 Model로 반환해줘야하는가?

- [ ] Repository는 무엇을 얼마만큼 제어해야할까?
  만약 Model의 내부 값이 변하면, 이것은 service에서 하나하나 분리해서 repository를 업데이트 해줘야하는가?

## 로그인 인증 과정에서의 어려움

상품과 멤버에 대해 컨트롤러와 서비스에서 규칙 없이 작성하였고, 위시 리스트 구현에서 어디서 무엇을 가져와서 어썬 식으로 사용해야할 지
생각하기에 어려움이 너무 커졌다.

# 7월 7일 refact 계획

1. dto, 컨트롤, 서비스, repository에 대해 통일성 부여하기

dto -> 데이터 transfer를 위해 존재
dto -> 모델로 변환하는 로직은 있으면 좋겠다는 생각 (model은 dto를 몰라도 되도록)
클라이언트 -> 컨트롤러 (dto사용) -> 서비스 (같은 dto 사용??)

근데 서비스에서는 특정 필드의 값만 필요한 경우가 있다.
서비스 내부에서는 항상 model로 변환해서? 서비스는 여러 모델들의 협업?

### repository 들 먼저 구조 변경해주기

실제 사용되는 String, int 등의 value를 직접 넘겨주도록 한다.
repository는 결국 DB와 매우 큰 밀착관계이고, Model을 몰라도 된다?

반환은 Model을 해준다?

- [X] Repository 통일성 부여 : 기본 검색은 id를 기반으로 한다. Model을 params로 받지 않는다. 반환은 Model로 해준다.

# 7월 8일 (월)

1. 피드백에 따라서 수정 진행
2. wishlist 완벽하게 동작하도록 수정하기

## 피드백 반영

1. 공통적인 포멧이 있는 것은 좋지만, DTO는 용도에 맞게 사용하는 것이 좋다. 불필요한 데이터까지 내줄 필요 없음

2. 문서는 코드 자체로 잘 이해할 수 있도록 해두는 것이 좋다. -> 클린코드

3. 불필요한 축약어 사용 X, stream 적극적인 활용 -> ok

4. 파일 전반적인 설명 주석은 상단에, 그리고 주석이 필요하다면 자세하게 -> ok

5. rest 규격에 맞게 경로 설계하기 -> {id} 등으로 받기 -> ok

6. 변수명 camelCase 로 -> ok

7. 인증 토큰은 저장할 필요가 있는가?

8. 중복된 이메일 -> 데이터베이스에서도 막을 수 있도록 유니크 설정시켜주기 -> ok

9. addNew 와 같이 중복된 네이밍 X
